# –í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º std::vector, list, deque –∏—Ç–¥.

## –û–ø–∏—Å–∞–Ω–∏–µ

–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ–ø–∏—Å–∞–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

---

## std::unordered_map –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–ø–æ—Å–æ–±—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π –≤ HashMap
#### 1. –û—Ç–∫—Ä—ã—Ç–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è (Open Addressing)
- –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–≥–æ –º–∞—Å—Å–∏–≤–∞**.
- –ï—Å–ª–∏ –º–µ—Å—Ç–æ –∑–∞–Ω—è—Ç–æ, –∏—â–µ—Ç—Å—è –¥—Ä—É–≥–æ–µ "—Å–≤–æ–±–æ–¥–Ω–æ–µ" –º–µ—Å—Ç–æ –ø–æ –∫–∞–∫–æ–º—É-—Ç–æ –ø—Ä–∞–≤–∏–ª—É

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- **Linear probing (–ª–∏–Ω–µ–π–Ω–æ–µ –∑–æ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ):** 
–ï—Å–ª–∏ –∫–æ–ª–ª–∏–∑–∏—è, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ—Ç—ã: `h(k), h(k)+1, h(k)+2, ...`

- **Quadratic probing (–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –∑–æ–Ω–¥–∏—Ä–æ–≤–∞–Ω–∏–µ):**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—É—é —Ñ–æ—Ä–º—É–ª—É: `h(k), h(k)+1¬≤, h(k)+2¬≤, ...`

- **Double hashing (–¥–≤–æ–π–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ):**
–í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä–∏—á–Ω–∞—è —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —à–∞–≥–∞ –ø—Ä–∏ –∫–æ–ª–ª–∏–∑–∏–∏:
`h(k) + i * h2(k)`

üî∏ –ü–ª—é—Å—ã: –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, —Ö–æ—Ä–æ—à–∞—è –ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫—ç—à–∞.

üî∏ –ú–∏–Ω—É—Å—ã: –í–æ–∑–º–æ–∂–Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Ç–∞–±–ª–∏—Ü—ã (>70%).

#### 2. –¶–µ–ø–æ—á–∫–∏ (Separate Chaining)
–í–º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ —Å–ª–æ—Ç–µ, —Ö—Ä–∞–Ω—è—Ç—Å—è —Å**—Å—ã–ª–∫–∏ –Ω–∞ —Å–ø–∏—Å–æ–∫/–≤–µ–∫—Ç–æ—Ä/–¥–µ—Ä–µ–≤–æ** –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ö—ç—à–µ–º.

- **–ü–ª—é—Å—ã**: –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∫–æ–ª–ª–∏–∑–∏–π.
- **–ú–∏–Ω—É—Å—ã**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (—É–∫–∞–∑–∞—Ç–µ–ª–∏), –∫—ç—à-–ø—Ä–æ–º–∞—Ö–∏.

–í C++ `std::unordered_map` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ü–µ–ø–æ—á–∫–∏**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `std::list` –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

---

## std::deque –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
`std::deque` (double-ended queue) ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ C++, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –æ—á–µ—Ä–µ–¥—å, —Ç–æ –µ—Å—Ç—å:

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –≤—Å—Ç–∞–≤–∫–∏ –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å –æ–±–æ–∏—Ö –∫–æ–Ω—Ü–æ–≤ ‚Äî –∫–∞–∫ `push_front`, —Ç–∞–∫ –∏ `push_back`.

–ü—Ä–∏ —ç—Ç–æ–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø–æ –∏–Ω–¥–µ–∫—Å—É (`–∫–∞–∫ operator[] –∏ at`) –∑–∞ `O(1)`, –∫–∞–∫ –∏ `std::vector.`

### 1. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
–ù—É–∂–Ω–æ —á–∞—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞	–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç std::vector, –≤—Å—Ç–∞–≤–∫–∞ –≤ –Ω–∞—á–∞–ª–æ —É deque —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–¥–≤–∏–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤)


| –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å     | –ü–æ—á–µ–º—É `std::deque` –ª—É—á—à–µ  |
|----------------------|-------------|
| –ù—É–∂–Ω–æ —á–∞—Å—Ç–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å –Ω–∞—á–∞–ª–∞ –∏ –∫–æ–Ω—Ü–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞    | –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `std::vector`, –≤—Å—Ç–∞–≤–∫–∞ –≤ –Ω–∞—á–∞–ª–æ —É `deque` —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–¥–≤–∏–≥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤)  |
| –ù—É–∂–µ–Ω –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –∏–Ω–¥–µ–∫—Å—É + –≤—Å—Ç–∞–≤–∫–∞ –Ω–∞ –∫–æ–Ω—Ü–∞—Ö     | `std::deque` —Å–æ—á–µ—Ç–∞–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–µ–∫—Ç–æ—Ä–∞ –∏ –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞   |
| –ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω –æ–±—ä—ë–º –∑–∞—Ä–∞–Ω–µ–µ –∏ –Ω–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–º–µ–∂–Ω–æ—Å—Ç–∏     | `std::deque` –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ª–µ–∂–∞—Ç –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–º –±–ª–æ–∫–µ –ø–∞–º—è—Ç–∏, `–∫–∞–∫ vector`  |
### 2. –ö–∞–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å–ª—É—á–∞–π–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –≤ std::deque?

–û–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–Ω–¥–µ–∫—Å—É –∫ —ç–ª–µ–º–µ–Ω—Ç—É –≤ `std::deque` –∏–º–µ–µ—Ç –∞–º–æ—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å `O(1)`.
```c++
std::deque<int> dq = {1, 2, 3, 4, 5};
int x = dq[3]; // O(1)
```
**–û–¥–Ω–∞–∫–æ:**

- `std::deque` —É—Å—Ç—Ä–æ–µ–Ω –Ω–µ –∫–∞–∫ —Å–ø–ª–æ—à–Ω–æ–π –º–∞—Å—Å–∏–≤, –∞ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –∏–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –ø–∞–º—è—Ç–∏.
- –≠—Ç–æ —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º —É `std::vector`, –∏–∑-–∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∫–æ—Å–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞.

---
## std::list –∏ std::forward_list

`std::list` - –≠—Ç–æ –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫.
–ë—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Å–ø–∏—Å–∫–∞ ‚Äî **O(1)**, –µ—Å–ª–∏ –µ—Å—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –Ω—É–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏—é.

`std::forward_list` - –≠—Ç–æ –æ–¥–Ω–æ—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫.

- –≠–∫–æ–Ω–æ–º–Ω–µ–µ –ø–æ –ø–∞–º—è—Ç–∏.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∏—Ç–µ—Ä–∞—Ü–∏—é.
- –ë—ã—Å—Ç—Ä–∞—è –≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏** ‚Äî —Ç–æ–∂–µ **O(1)**.

---

---
## priority_queue

`std::priority_queue` ‚Äî —ç—Ç–æ **–∞–¥–∞–ø—Ç–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—á–µ—Ä–µ–¥–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç ‚Äî –Ω–∞–≤–µ—Ä—Ö—É), 
–ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π –Ω–∞ –±–∞–∑–µ –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (**–æ–±—ã—á–Ω–æ vector**) –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π —Å –ø–æ–º–æ—â—å—é max-heap.

1. –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Container (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `std::vector`).
2. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `push` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `std::push_heap` (–∏–∑ `<algorithm>`), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∫—É—á–∏.
3. `pop()` –≤—ã–∑—ã–≤–∞–µ—Ç `std::pop_heap`, –∞ –∑–∞—Ç–µ–º `container.pop_back()`.
4. `top()` ‚Äî —ç—Ç–æ `container.front()`.

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**
```c++
pq.push(10);   // –í–µ–∫—Ç–æ—Ä: [10] ‚Üí heap ok
pq.push(5);    // –í–µ–∫—Ç–æ—Ä: [10, 5] ‚Üí heap: [10, 5]
pq.push(20);   // –í–µ–∫—Ç–æ—Ä: [10, 5, 20] ‚Üí –ø–æ—Å–ª–µ push_heap: [20, 5, 10]
```
**–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```c++
template<typename T, typename Compare = std::less<T>>
class MyPriorityQueue {
    std::vector<T> data;
    Compare comp;

public:
    void push(const T& value) {
        data.push_back(value);
        std::push_heap(data.begin(), data.end(), comp);
    }

    void pop() {
        std::pop_heap(data.begin(), data.end(), comp);
        data.pop_back();
    }

    const T& top() const {
        return data.front();
    }

    bool empty() const {
        return data.empty();
    }

    size_t size() const {
        return data.size();
    }
};
```
---

## –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

---

### –ß—Ç–æ –≤–∞–∂–Ω–æ –∑–Ω–∞—Ç—å –æ `std::optional`, `std::variant`, `std::tuple`?

**–û—Ç–≤–µ—Ç:**

- `std::optional<T>` ‚Äî –æ–±—ë—Ä—Ç–∫–∞, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ `nullptr` –∏–ª–∏ —Ñ–ª–∞–≥–æ–≤.
- `std::variant<T1, T2, ...>` ‚Äî —Ç–∏–ø-–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º. –ü–æ–¥–æ–±–∏–µ `union`, –Ω–æ —Å —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é.
- `std::tuple<T1, T2, ...>` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∑–Ω–∞—á–µ–Ω–∏–π —Ä–∞–∑–Ω–æ–≥–æ —Ç–∏–ø–∞.

### –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è `variant` –æ—Ç `any`?

**–û—Ç–≤–µ—Ç:**
- `std::variant` ‚Äî –Ω–∞–±–æ—Ä —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ, –±–µ–∑ RTTI.
- `std::any` ‚Äî —Ç–∏–ø-–æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –ª—é–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –¢—Ä–µ–±—É–µ—Ç RTTI –∏ –º–µ–¥–ª–µ–Ω–Ω–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.


### –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ `std::tuple`?

**–û—Ç–≤–µ—Ç:**

```cpp
std::tuple<int, float, std::string> t;
using T = std::tuple_element_t<1, decltype(t)>; // T = float
```

---
### –í std::set –ø–æ–∏—Å–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞

**–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞ O(1)**

–ü–æ—Ç–æ–º—É —á—Ç–æ `std::set` ‚Äî —ç—Ç–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –ø–æ–∏—Å–∫–∞ (–æ–±—ã—á–Ω–æ red-black tree), –≤ –∫–æ—Ç–æ—Ä–æ–º:

- –≠–ª–µ–º–µ–Ω—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
- –°–∞–º—ã–π –±–æ–ª—å—à–æ–π —ç–ª–µ–º–µ–Ω—Ç –≤—Å–µ–≥–¥–∞ –≤ –∫–æ–Ω—Ü–µ (`--set.end()`).
- –°–∞–º—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç ‚Äî —ç—Ç–æ `set.begin()`.

---

### –ß—Ç–æ —Ç–∞–∫–æ–µ placement new?

`placement new` ‚Äî —ç—Ç–æ —Ñ–æ—Ä–º–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ new, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç **—Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç –≤ –∑–∞—Ä–∞–Ω–µ–µ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏**.
```c++
new (pointer) Type(constructor_args);
```
- `pointer` ‚Äî —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –±—É—Ñ–µ—Ä –ø–∞–º—è—Ç–∏ (–æ–±—ã—á–Ω–æ `void*` –∏–ª–∏ `char*`).
- `Type(...)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Ç–∏–ø–∞ `Type` –Ω–∞ —ç—Ç–æ–π –ø–∞–º—è—Ç–∏.

**–¢–∏–ø–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è optional —Å placement new**:
```c++
template <typename T>
class SimpleOptional {
private:
    alignas(T) unsigned char storage_[sizeof(T)];
    bool has_value_ = false;

public:
    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø—É—Å—Ç–æ–π optional
    my_optional() noexcept : has_value_(false) {}

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è
    my_optional(const T& value) : has_value_(true) {
        new (&storage_) T(value); // placement-new
    }

    T& value() {
        if (!has_value_) throw std::runtime_error("No value");
        return *reinterpret_cast<T*>(&storage_);
    }

    void reset() {
        if (has_value_) {
            reinterpret_cast<T*>(&storage_)->~T();
            has_value_ = false;
        }
    }

    ~SimpleOptional() {
        reset();
    }
};
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- storage_e` ‚Äî —ç—Ç–æ "—Å—ã—Ä–∞—è" –ø–∞–º—è—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –æ–±—ä–µ–∫—Ç–∞.
- `new (&storage_) T(value);` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç –≤ —ç—Ç–æ–º –º–µ—Å—Ç–µ. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä!
- `reinterpret_cast<T*>(&storage_)->~T();` ‚Äî –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é. `delete` –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äî 
 –ø–∞–º—è—Ç—å –Ω–µ –≤—ã–¥–µ–ª—è–ª–∞—Å—å —á–µ—Ä–µ–∑ `new`.

- –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `placement new`, `delete` **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è** ‚Äî –ø–∞–º—è—Ç—å –Ω–µ –≤—ã–¥–µ–ª—è–ª–∞—Å—å —á–µ—Ä–µ–∑ `new`.
- **–í—ã–∑—ã–≤–∞—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—Ä—É—á–Ω—É—é**
- –ù—É–∂–Ω–æ **–æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏** ‚Äî —á–µ—Ä–µ–∑ alignas(T).

