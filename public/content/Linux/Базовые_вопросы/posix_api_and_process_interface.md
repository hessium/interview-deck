# POSIX API и интерфейс взаимодействия с процессами

## Описание
Понятие POSIX API и взаимодействие приложений с ОС через стандартные интерфейсы.

## Вопросы и ответы

### Вопрос: Что такое POSIX API и для чего он нужен?
**Ответ:**  
POSIX API — это стандарт, определяющий интерфейсы взаимодействия программ с ОС. Он обеспечивает переносимость кода между UNIX-подобными системами. Примеры: `fork`, `exec`, `read`, `write`, `pthread_create`, `mmap` и т.д.

### Вопрос: Чем отличается процесс от системного потока?

- Системный поток запускается внутри процесса
- Процессы не шарят память между собой, а потоки внутри процесса — шарят.
- И то и другое это Task в терминах ядра Linux. Отличие в том, что процессы по-умолчанию
  не шарят память, а потоки в рамках процесса — шарят. При этом процессы тоже могут
  шарить, делается это через специальные механизмы типа shm_open или mmap.
**Дополнительный вопрос:** "А как процессы могут обмениваться информацией?"
**Ответ:** сокеты, пайпы, сигналы


### Вопрос: Какие дескрипторы по умолчанию существуют в программе, написанной на C++?
**Ответ:**  
При запуске процесса в Linux по умолчанию открыты 3 дескриптора:
- `0` — стандартный ввод (`stdin`)
- `1` — стандартный вывод (`stdout`)
- `2` — стандартная ошибка (`stderr`)

**errno in C++: Basics and Best Practices**

**1. Core Concepts**
- Глобальная переменная (макрос), устанавливаемая системными вызовами и библиотечными функциями при ошибках
- Определяется в `<cerrno> (C++)` или `<errno.h> (C)`
- **Важно**: Не сбрасывается в случае успеха!


**2. Пример обработки**

```c++
    errno = 0; // Сброс
    FILE* f = fopen("/nonexistent", "r");
    
    if (!f) {
        const int err = errno; // Сохраняем значение
        std::cerr << "Failed to open file:\n"
                  << "Code: " << err << '\n'
                  << "Message: " << strerror(err) << '\n'
                  << "POSIX: " << std::generic_category().message(err) << '\n';
        return 1;
    }
    
    fclose(f);
    return 0;

```

**3. Common Codes**
```c++
if (errno == EINVAL) { /* Некорректный аргумент */ }
if (errno == ENOMEM) { /* Недостаточно памяти */ }
```

